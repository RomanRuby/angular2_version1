<div class="container" *ngIf="productForm">
	<form [formGroup]="productForm" (ngSubmit)="onSubmit(productForm)">
		<div class="form-group">
			<label><b> Cluster Role</b></label>
		</div>

		<div class="form-group">
			<label for="name">name</label>
			<input id="name" type="text" class="form-control" formControlName="name">
		</div>

		<input type="checkbox" [checked]="saveUsername" (change)="saveUsername = !saveUsername" />
		<div *ngIf="!saveUsername" class="form-group">
			<div class="form-group">
				<label for="apiVersion">apiVersion</label>
				<input id="apiVersion" type="text" class="form-control" formControlName="apiVersion">

			</div>
			<div class="form-group">
				<label for="generateName">generateName</label>
				<input id="generateName" type="text" class="form-control" formControlName="generateName">
			</div>

			<div class="form-group">
				<label for="selfLink">selfLink</label>
				<input id="selfLink" type="text" class="form-control" formControlName="selfLink">
			</div>

			<div class="form-group">
				<label for="uid">uid</label>
				<input id="uid" type="text" class="form-control" formControlName="uid">
			</div>

		</div>


		<div formArrayName="policyRules">
			<div *ngFor="let policyRules of productForm.controls.policyRules.controls; let i=index" class="panel panel-default">
				<div class="panel-heading">
					<span>PolicyRules {{i + 1}}</span>
					<span class="glyphicon glyphicon-remove pull-right" *ngIf="productForm.controls.policyRules.controls.length > 1" (click)="removePolicyRules(i)"></span>
				</div>
				<div class="panel-body" [formGroupName]="i">
					<div class="form-group col-xs-6">
						<label>verbs</label>
						<input type="text" class="form-control" formControlName="verbs">
						<small [hidden]="productForm.controls.policyRules.controls[i].controls.verbs.valid" class="text-danger">
							verbs is required
						</small>
					</div>
					<div class="form-group col-xs-6">
						<label>apiGroups</label>
						<input type="text" class="form-control" formControlName="apiGroups">
					</div>
					<div class="form-group col-xs-6">
						<label>resources</label>
						<input type="text" class="form-control" formControlName="resources">

					</div>
					<div class="form-group col-xs-6">
						<label>resourceNames</label>
						<input type="text" class="form-control" formControlName="resourceNames">

					</div>
				</div>
			</div>
		</div>
		<div class="margin-20">
			<a (click)="addPolicyRules()" style="cursor: default">
				Add +
			</a>
		</div>


		<input type="button" class="btn btn-default" (click)="goBack()" value="Cancel" />
		<input type="submit" class="btn btn-primary" value="Save" [disabled]="productForm.invalid" />
	</form>

	<div *ngIf="type">
		<h3 class="first">Common information </h3>
		<table class="table">
			<thead>
			<tr>
				<th>creationTimestamp</th>
				<th>name</th>
				<th>uid</th>
			</tr>
			</thead>

			<tbody>
			<tr class="accordion-toggle" data-toggle="collapse" data-target="#12345-cores">
				<th> {{responseRole.metadata.creationTimestamp}}</th>
				<th>{{responseRole.metadata.name}}</th>
				<th>{{responseRole.metadata.uid}}</th>
			</tr>
			</tbody>
		</table>
		<div *ngFor="let item of responseRole.items; let i = index; ">
			<table class="table">
				<thead>
				<tr>
					<th>number</th>
					<th>name</th>
					<th>uid</th>
					<th>creationTimestamp</th>
					<th>  verbs</th>
					<th> apiGroups</th>
					<th> resources</th>
				</tr>
				</thead>

				<tbody>
				<tr class="accordion-toggle" data-toggle="collapse" data-target="#12345-cores">
					<th>{{i}}</th>
					<th> {{item.metadata.name}}</th>
					<th>{{item.metadata.uid}}</th>
					<th>{{item.metadata.creationTimestamp}}</th>
					<div *ngFor="let rule of item.rules; ">
						<div *ngFor="let verb of rule.verbs; ">
							<td>{{verb}}</td>
						</div>
						<div *ngFor="let api of rule.apiGroups; ">
							<td>{{api}}</td>
						</div>
						<div *ngFor="let resources of rule.resources; ">
							<td>{{resources}}</td>
						</div>
					</div>
				</tr>

				</tbody>
			</table>
		</div>
	</div>
</div>