<div class="container" *ngIf="productForm">
	<form [formGroup]="productForm" (ngSubmit)="onSubmit(productForm)">

		<div class="form-group">
			<label for="kindMeta">kind Meta</label>
			<input id="kindMeta" type="text" class="form-control" formControlName="kindMeta">
		</div>

		<div class="form-group">
			<label for="kindRef">kind Authorizer</label>
			<input id="kindRef" type="text" class="form-control" formControlName="kindRef">
		</div>
		<div class="form-group">
			<label for="name">name Meta</label>
			<input id="name" type="text" class="form-control" formControlName="name">
		</div>

		<div class="form-group">
			<label for="namespace">kind namespace</label>
			<input id="namespace" type="text" class="form-control" formControlName="namespace">
		</div>
		<div class="form-group">
			<label for="nameRef">name Authorizer</label>
			<input id="nameRef" type="text" class="form-control" formControlName="nameRef">
		</div>
		<div class="form-group">
			<label for="apiGroupRef">apiGroup Authorizer</label>
			<input id="apiGroupRef" type="text" class="form-control" formControlName="apiGroupRef">
		</div>

		<input type="checkbox" [checked]="saveUsername" (change)="saveUsername = !saveUsername" />
		<div *ngIf="!saveUsername" class="form-group">
			<div class="form-group">
				<label for="generateName">generateName</label>
				<input id="generateName" type="text" class="form-control" formControlName="generateName">
			</div>
			<div class="form-group">
				<label for="apiVersion">apiVersion</label>
				<input id="apiVersion" type="text" class="form-control" formControlName="apiVersion">
			</div>
		</div>
		<div formArrayName="subjectRules">
			<div *ngFor="let subjectRules of productForm.controls.subjectRules.controls; let i=index" class="panel panel-default">
				<div class="panel-heading">
					<span>PolicyRules {{i + 1}}</span>
					<span class="glyphicon glyphicon-remove pull-right" *ngIf="productForm.controls.subjectRules.controls.length > 1" (click)="removeSubjectRules(i)"></span>
				</div>
				<div class="panel-body" [formGroupName]="i">
					<div class="form-group col-xs-6">
						<label>apiGroup</label>
						<input type="text" class="form-control" formControlName="apiGroup">
						<small [hidden]="productForm.controls.subjectRules.controls[i].controls.apiGroup.valid" class="text-danger">
							apiGroup is required
						</small>
					</div>
					<div class="form-group col-xs-6">
						<label>kind</label>
						<input type="text" class="form-control" formControlName="kind">
						<small [hidden]="productForm.controls.subjectRules.controls[i].controls.kind.valid" class="text-danger">
							kind is required
						</small>
					</div>
					<div class="form-group col-xs-6">
						<label>name</label>
						<input type="text" class="form-control" formControlName="name">
						<small [hidden]="productForm.controls.subjectRules.controls[i].controls.name.valid" class="text-danger">
							name is required
						</small>
					</div>
					<div class="form-group col-xs-6">
						<label>namespace</label>
						<input type="text" class="form-control" formControlName="namespace">
						<small [hidden]="productForm.controls.subjectRules.controls[i].controls.namespace.valid" class="text-danger">
							namespace is required
						</small>
					</div>
				</div>
			</div>
		</div>
		<div class="margin-20">
			<a (click)="addSubjectRules()" style="cursor: default">
				Add another +
			</a>
		</div>


		<input type="button" class="btn btn-default" (click)="goBack()" value="Cancel" />
		<input type="submit" class="btn btn-primary" value="Save" [disabled]="productForm.invalid" />
	</form>
</div>